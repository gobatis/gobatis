<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//gobatis.co//DTD Mapper 1.0//EN" "gobatis.co/dtd/mapper.dtd">

<mapper>
    <!-- å‡½æ•°  Query001 = func(authed bool, page, limit int64) (total int64, items []*User, err error)  -->
    <query id="QueryR001" parameter="page,limit,status">
        <block type="COUNT">
            select count(1)
        </block>
        <block type="SELECT">
            select id,username,status
        </block>
        <block type="SOURCE">
            from members
            <where>
                <choose>
                    <when test="status>0">
                        status &lt;= 0
                    </when>
                    <otherwise>
                        status >= 0
                    </otherwise>
                </choose>
            </where>
        </block>
        <block type="PAGING">
            order by id desc
            limit #{limit}
            offset #{ paging(page,limit) };
        </block>
    </query>
</mapper>
